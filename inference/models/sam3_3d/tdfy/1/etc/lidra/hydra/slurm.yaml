defaults:
  - base
  - override /hydra/launcher@launcher: submitit_slurm

launcher: # https://hydra.cc/docs/plugins/submitit_launcher/
  # compute
  nodes: ${compute.n_nodes}
  gpus_per_node: ${compute.n_gpus_per_node}
  tasks_per_node: ${compute.n_gpus_per_node}
  cpus_per_task: ${compute.n_cpus_per_gpu}

  # cluster slurm args
  partition: ${cluster.slurm.partition}
  constraint: ${cluster.slurm.constraint}
  qos: ${cluster.slurm.qos}

  # remaining args
  mem_per_gpu: ${cluster.slurm.mem_per_gpu} # regular RAM per GPU (not VRAM)
  timeout_min: ${cluster.slurm.timeout}
  max_num_timeout: 5
  comment: null
