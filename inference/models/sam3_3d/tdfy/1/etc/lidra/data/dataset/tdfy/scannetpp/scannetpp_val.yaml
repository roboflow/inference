defaults:
  - /data/dataset/tdfy/trellis500k/preprocessor@latent_loader_dataset.preprocessor: val_default

_target_: lidra.data.dataset.tdfy.r3.anything_dataset.AnythingDataset
dataset:
  _target_: lidra.data.dataset.tdfy.r3.dataset.R3Dataset
  data_dir: "${cluster.path.datasets}/scannetpp_new"

# Latent loader configuration
latent_loader_dataset:
  _target_: lidra.data.dataset.tdfy.trellis.dataset.PerSubsetDataset
  path: "${cluster.path.datasets}/scannetpp_new"
  split: "val"
  metadata_fname: metadata.csv
  pose_loader: 
    _target_: lidra.data.dataset.tdfy.trellis.pose_loader.R3.load_pose
    _partial_: true
  pointmap_loader:
    _target_: lidra.data.dataset.tdfy.trellis.pose_loader.R3.load_pointmap
    _partial_: True
    pointcloud_directory: "${cluster.path.datasets}/scannetpp_new/raw"
  return_pointmap: true
  metadata_filter:
    _target_: lidra.data.dataset.tdfy.metadata_filter.custom_metadata_filter
    filter_funcs:
      - _target_: lidra.data.dataset.tdfy.metadata_filter.data_query_filter
        query: "flow_mag_5p >= 30 and flow_mag_5p < 31" 
