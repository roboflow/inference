# @package _global_
defaults:
  - fm-trellis-features-trellis500k-tricks

# batch_size: 4

loop:
  max_epochs: 800
  precision: null
  dataloaders:
    validation: null
    training:
      dataset:
        datasets:
          # ObjaverseXL_github_all:
          #   latent_dir: ${tdfy.latent_dir}
          ABO:
            latent_dir: ${tdfy.latent_dir}
            metadata_filter:
              filter_funcs: ${tdfy.filter_funcs}
          HSSD:
            latent_dir: ${tdfy.latent_dir}
            metadata_filter:
              filter_funcs: ${tdfy.filter_funcs}
          ObjaverseXL_github:
            latent_dir: ${tdfy.latent_dir}
            metadata_filter:
              filter_funcs: ${tdfy.filter_funcs}
          ObjaverseXL_sketchfab:
            latent_dir: ${tdfy.latent_dir}
            metadata_filter:
              filter_funcs: ${tdfy.filter_funcs}
          # ObjaverseXL_sketchfab_all:
          #   latent_dir: ${tdfy.latent_dir}
          #   metadata_filter:
          #     filter_funcs: ${tdfy.filter_funcs}
          # shutterstock_3d:
          #   latent_dir: ${tdfy.latent_dir}
          #   metadata_filter:
          #     filter_funcs: ${tdfy.filter_funcs}

tdfy:
  latent_dir: "latents/inhouseSLATVAE_gsplat_epoch=249-step=462000-v1"
  filter_funcs: 
    - _target_: lidra.data.dataset.tdfy.metadata_filter.data_query_filter
      # Can change to below to have higher # of voxels with slower training speed
      query: "num_voxels<35000 and num_voxels>0 and cond_rendered and `latent_inhouseSLATVAE_gsplat_epoch=249-step=462000-v1`"