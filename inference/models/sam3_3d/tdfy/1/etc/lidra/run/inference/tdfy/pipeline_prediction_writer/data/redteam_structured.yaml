# Data configuration for redteam_structured dataset

defaults:
  - /data/dataset/tdfy/trellis500k/preprocessor@validation.dataset.preprocessor: to_tensor
  - _self_

validation:
  _target_: torch.utils.data.DataLoader
  dataset:
    _target_: lidra.data.dataset.tdfy.folder.dataset.FolderDataset
    
    # Directories - using absolute paths
    image_dir: "/home/ssax/lidra/local_data/redteam_structured/rgb"
    mask_dir: "/home/ssax/lidra/local_data/redteam_structured/instance_masks"
    pointmap_dir: null  # No pointmaps for this dataset
    
    # No pointmap loader needed for this dataset
    pointmap_loader: null
    
    # File matcher - use MultiInstanceMaskMatcher for subdirectory structure
    file_matcher:
      _target_: lidra.data.dataset.tdfy.folder.dataset.MultiInstanceMaskMatcher
    
    # Don't return pointmap since we don't have them
    return_pointmap: false
    
    # Auto-match fallback
    auto_match: false  # We know our matcher will work
    
    # No frame filtering for this dataset
    metadata_filter: null
    
    # Preprocessor will be injected by defaults
  
  # DataLoader settings
  batch_size: 1
  num_workers: 0  # Set to 0 for testing, normally would be ${compute.n_cpus_per_gpu}
  persistent_workers: false
  pin_memory: true
  shuffle: false